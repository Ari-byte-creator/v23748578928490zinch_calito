<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Valentine Letter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Aldrich&family=Pixelify+Sans:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <title>Valentine Letter</title>
    
    <!-- Preload critical assets -->
    <link rel="preload" as="image" href="envelope.png" />
    <link rel="preload" as="image" href="window.png" />
    <link rel="preload" as="image" href="curtain.png" />
    <link rel="preload" as="image" href="capy_please_heart.gif" />
    <link rel="preload" as="image" href="capy_happy.gif" />
    <link rel="preload" as="image" href="yes.png" />
    <link rel="preload" as="image" href="no.png" />
  </head>
  <body>
    <script>
      if (sessionStorage.getItem("authorized") !== "true") {
        window.location.href = "login.html";
      }
    </script>

    <!-- Curtain -->
    <div id="curtain">
      <div class="loading-indicator">Please Wait, while I ready</div>
    </div>

    <!-- Countdown Screen -->
    <div id="countdown-container">
      <div class="countdown-content">
        <video 
          id="countdown-video" 
          playsinline 
          preload="auto"
          crossorigin="anonymous"
          muted
          style="display: block;">
          <!-- MP4 format (primary) -->
          <source src="countdown-video.mp4" type="video/mp4">
          <!-- WebM format (fallback for better compression on some browsers) -->
          <source src="countdown-video.webm" type="video/webm">
          <!-- Fallback image -->
          <img id="countdown-gif" src="cute-gif.gif" alt="Cute animation" />
        </video>
      </div>
    </div>

    <!-- Envelope Screen -->
    <div id="envelope-container">
      <img src="envelope.png" alt="Envelope" id="envelope" />
      <p>♡ Letter for Taly ♡</p>
    </div>

    <!-- Letter Screen -->
    <div id="letter-container">
      <div class="letter-window">
        <h1 id="letter-title">Will you be my Valentine?</h1>

        <img src="capy_please_heart.gif" class="capy" id="letter-capy" />

        <div class="buttons" id="letter-buttons">
          <img src="yes.png" class="btn yes-btn" alt="Yes" />

          <div class="no-wrapper">
            <img src="no.png" class="btn no-btn" alt="No" />
          </div>
        </div>

        <p id="final-text" class="final-text" style="display: none">
          <strong>Mwehehe,</strong> I love you so much pretty girl ko.
        </p>
      </div>
    </div>

    <!-- Audio Elements -->
    <audio id="bgMusic" loop preload="auto">
      <source src="background-music.mp3" type="audio/mpeg">
    </audio>
    <audio id="countdownAudio" preload="auto">
      <source src="countdown-audio.mp3" type="audio/mpeg">
    </audio>
    <audio id="yesSound" preload="auto">
      <source src="yes-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="yesSound2" preload="auto">
      <source src="yes-sound-2.mp3" type="audio/mpeg">
    </audio>
    <audio id="noSound" preload="auto">
      <source src="no-sound.mp3" type="audio/mpeg">
    </audio>

    <script src="script.js"></script>
  </body>
</html>